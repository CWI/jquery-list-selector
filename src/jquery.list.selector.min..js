(function(a){listSettings=[];methods={defaults:{postPropertyName:"items[]",dataTag:"data",onToggle:function(b){},onSelect:function(b){a(b).addClass("selected")},onUnselect:function(b){a(b).removeClass("selected")},onBeforeSelect:function(b){return true},onBeforeUnselect:function(b){return true}},init:function(b){var c=a.extend(methods.defaults,b||{});listSettings[a(this).listSelector("listId")]=c;a(this).listSelector("appendEvents")},listId:function(){var b=a(this).attr("id");if(!b){a.error("Selected element should have id defined.")}return b},toggle:function(b){method=a(this).listSelector("isSelected",b)?"unselect":"select";a(this).listSelector(method,b)},isSelected:function(b){return a("input[type=hidden].list-selector-hidden",b).length>0},select:function(d){var b=listSettings[a(this).listSelector("listId")];var c=a(d).attr(b.dataTag);if(b.onBeforeSelect&&!b.onBeforeSelect.apply(this,[d])){return}a(d).append('<input type="hidden" name="'+b.postPropertyName+'" class="list-selector-hidden" value="'+c+'" />');if(b.onToggle){b.onToggle.apply(this,[d,true])}if(b.onSelect){b.onSelect.apply(this,[d])}},unselect:function(c){var b=listSettings[a(this).listSelector("listId")];if(b.onBeforeUnselect&&!b.onBeforeUnselect.apply(this,[c])){return}a("input[type=hidden].list-selector-hidden",c).remove();if(b.onToggle){b.onToggle.apply(this,[c,false])}if(b.onUnselect){b.onUnselect.apply(this,[c])}},appendEvents:function(){$listElm=a(this);var b=a("li",$listElm);b.click(function(){$listElm.listSelector("toggle",this)})},selectedElements:function(){return a("input[type=hidden].list-selector-hidden",this).closest("li")},unselectedElements:function(){return a("li",this).not(a(this).listSelector("selectedElements"))},elements:function(){return a("li",this)},selectedItems:function(){var b=[];a("input[type=hidden].list-selector-hidden",this).each(function(){b.push(a(this).val())});return b}};a.fn.listSelector=function(c){var b=Array.prototype.slice.call(arguments,1);if(methods[c]){return methods[c].apply(this,b)}else{a.error("Undefined list selector method: "+c)}}})(jQuery);
